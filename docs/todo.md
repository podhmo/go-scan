# TODO

## `locator.go` の改善

- 現在 `locator.Locator.FindPackageDir` には、`go-scan` リポジトリ自身のテストデータやサンプルコードが、メインモジュールとは異なるモジュールコンテキスト（独自の `go.mod` を持つサブディレクトリなど）から参照される場合に対応するためのフォールバック処理が含まれています。
- このフォールバックは、特定のモジュールパス（例: `github.com/podhmo/go-scan`）をハードコード気味に扱うため、汎用性が低いアプローチです。
- **将来的な改善点:**
    - このフォールバック処理を削除し、`go-scan` がスキャン対象のモジュール境界を厳密に守るようにする。
    - または、複数のモジュールルートや依存関係をよりGoの標準的なビルド方法に近い形で解決できる、より汎用的で設定可能なメカニズムを導入する。例えば、ワークスペースの概念の導入や、`go.work` ファイルの（限定的な）解釈などが考えられます。
    - `go-scan` の主なユースケースとスコープを再検討し、このようなクロスモジュール（ただしリポジトリ内）参照のサポートが本当に必要か、必要であればどのような形が望ましいかを明確にする。
- このフォールバックが必要となった背景には、`go-scan` が `go/packages` のような重量級の依存関係解決を行わずに動作するという設計思想があります。軽量性を保ちつつ、どこまで柔軟なパッケージ解決をサポートするかのバランスが重要です。
