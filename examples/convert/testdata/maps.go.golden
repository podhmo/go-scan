// Code generated by convert. DO NOT EDIT.
package maps

import (
	"context"
	"errors"
	"fmt"

	m "example.com/m"
	"github.com/podhmo/go-scan/examples/convert/model"
)

func convertSrcToDst(ctx context.Context, ec *model.ErrorCollector, src *m.Src) *m.Dst {
	if src == nil {
		return nil
	}
	dst := &m.Dst{}
	if ec.MaxErrorsReached() {
		return dst
	}
	ec.Enter("Items")
	dst.Items = func() map[string]m.DstItem {
		convertedMap := make(map[string]m.DstItem, len(src.Items))
		for key, value := range src.Items {
			ec.Enter(fmt.Sprintf("[%v]", key))
			convertedMap[key] = *convertSrcItemToDstItem(ctx, ec, &value)
			ec.Leave()
		}
		return convertedMap
	}()
	ec.Leave()
	if ec.MaxErrorsReached() {
		return dst
	}
	ec.Enter("ItemPtrs")
	dst.ItemPtrs = func() map[string]*m.DstItem {
		convertedMap := make(map[string]*m.DstItem, len(src.ItemPtrs))
		for key, value := range src.ItemPtrs {
			ec.Enter(fmt.Sprintf("[%v]", key))
			convertedMap[key] = value
			ec.Leave()
		}
		return convertedMap
	}()
	ec.Leave()
	return dst
}

// ConvertSrcToDst converts Src to Dst.
func ConvertSrcToDst(ctx context.Context, src *m.Src) (*m.Dst, error) {
	if src == nil {
		return nil, nil
	}
	ec := model.NewErrorCollector(0)
	dst := convertSrcToDst(ctx, ec, src)
	if ec.HasErrors() {
		return dst, errors.Join(ec.Errors()...)
	}
	return dst, nil
}
func convertSrcItemToDstItem(ctx context.Context, ec *model.ErrorCollector, src *m.SrcItem) *m.DstItem {
	if src == nil {
		return nil
	}
	dst := &m.DstItem{}
	if ec.MaxErrorsReached() {
		return dst
	}
	ec.Enter("Value")
	dst.Value = src.Value
	ec.Leave()
	return dst
}

// ConvertSrcItemToDstItem converts SrcItem to DstItem.
func ConvertSrcItemToDstItem(ctx context.Context, src *m.SrcItem) (*m.DstItem, error) {
	if src == nil {
		return nil, nil
	}
	ec := model.NewErrorCollector(0)
	dst := convertSrcItemToDstItem(ctx, ec, src)
	if ec.HasErrors() {
		return dst, errors.Join(ec.Errors()...)
	}
	return dst, nil
}
