# 必ずやること

コードを変更したら以下を必ずやってください

コードのフォーマット

```shell
make format
```
全体のテスト

```shell
make test
```

## 補足 個別のテスト

- トップレベルのテストは`go test ./...`
- examples/の方のテストは`go -C ./examples/name test ./...`

で個別に実行できます。

# コミュニケーション

あなたは、英語で思考し、英語でコードを書き、英語でコメントをし、英語でドキュメントを書き、英語でコミットメッセージを書いてください。基本的にはすべての施行を英語でやってください。

ただしユーザーの入力への返答は日本語で行ってください。

# 知識の蓄積

- 1. `docs/trouble.md` に遭遇したトラブルとその経緯、解決策（または未解決であること）を具体的に記述すること。
- 2. 特に普遍的に役立つ知見や、プロジェクト固有の重要な意思決定につながるものは、`docs/knowledge.md` にも別途記録すること。

**Makefile内の `go run` コマンドについて**:
- Makefile で `go run` を使用してローカルの Go プログラムを実行する場合、原則として `go run ./ <引数...>` の形式を使用してください。これは、カレントディレクトリの main パッケージを実行することを明示し、特定のファイル名 (`main.go` など) への依存を避けるためです。
- この形式の採用経緯や詳細については、`docs/trouble.md` の `go run` に関するセクションを参照してください。
- Makefile内の `go run` コマンドを編集する際は、安易に他の形式（例: `go run main.go ...`）に変更せず、上記の標準形式とその理由を理解した上で慎重に行ってください。
 
# jules固有の環境の話題

- go buildするときは/tmpを出力先にしてください。
- 私はあなたのローカル環境に触ることはできません。またgithubにpushされないサブミットは変更することもできません。ファイルの修正をお願いしないでください。無駄です。
- 意図したファイルが存在しない状況になったらpwdで/appにいる事を確認してください。
  - 最悪常にcd /appを先頭に付けるワークアラウンドで対応してください。環境の問題でcwdがおかしくなることがあるようです。
  - 個別のexamplesのテストを実行するには `cd /app && go -C ./examples/<name> testで実行してください


# TODO.md

- 未実装のタスクと実装済みのタスクをチェックボックスで管理してください
- 機能全体が完了した場合にはimplementedのセクションに移動します

# 制約事項

- 禁止。`go/packages`や`go/types` はimportがeagerになってしまうので使わないこと。
- 禁止。go buildで作成したバイナリはコミットしないこと。
- 禁止。デバッグ用に一時的に作成したファイルはコミットしないこと。
- 禁止。 github.com/stretchr/testify は使わないこと
- 強制。ログにはlog/slogを使うこと。使うときはcontextを受け取るメソッドを使うこと（e.g. DebugContext()）
- 禁止。logパッケージを使わないこと。
- 強制。docs直下のファイルは英語で書くこと
- 強制。docs/ja直下のファイルは日本語で書くこと
- 強制。コミットメッセージは英語で書くこと
- 禁止。GOPATHを変更しないでください。特にテストでos.Setenvなどするのは禁止します。

# 補足情報

- go-scanとはgithub.com/podhmo/go-scanのことです。またこれはトップレベルのパッケージそのもののことを指してます
