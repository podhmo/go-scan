=== RUN   TestFindOrphans_intraPackageMethodCall
time=2025-08-29T21:03:20.862Z level=DEBUG source=/app/examples/find-orphans/main.go:107 msg="no go.work file found, falling back to go.mod scan" root=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001
time=2025-08-29T21:03:20.862Z level=DEBUG source=/app/examples/find-orphans/main.go:173 msg="creating locators for workspace" count=1 modules=[/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001]
time=2025-08-29T21:03:20.867Z level=INFO source=/app/examples/find-orphans/main.go:195 msg="* scan module" module=example.com/intra-pkg-methods
time=2025-08-29T21:03:20.868Z level=DEBUG source=/app/examples/find-orphans/main.go:203 msg="resolved target packages for reporting" count=1 packages=[example.com/intra-pkg-methods/lib]
time=2025-08-29T21:03:20.868Z level=DEBUG source=/app/examples/find-orphans/main.go:211 msg="resolved scan packages for analysis" count=1 packages=[example.com/intra-pkg-methods/lib]
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/examples/find-orphans/main.go:404 msg="walking with patterns" patterns=[example.com/intra-pkg-methods/lib]
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/modulewalker.go:59 msg="ScanPackageImports CACHE MISS" importPath=example.com/intra-pkg-methods/lib
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/goscan.go:978 msg="ScanPackageByImport CACHE MISS" importPath=example.com/intra-pkg-methods/lib
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/goscan.go:989 msg="ScanPackageByImport resolved import path" importPath=example.com/intra-pkg-methods/lib pkgDirAbs=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib module=example.com/intra-pkg-methods
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/goscan.go:995 msg="ScanPackageByImport found .go files" count=1 pkgDirAbs=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib files=[/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go]
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/goscan.go:1009 msg="ScanPackageByImport symbol cache status" importPath=example.com/intra-pkg-methods/lib enabled=false
time=2025-08-29T21:03:20.873Z level=INFO source=/app/examples/find-orphans/main.go:408 msg="analysis phase" packages=1
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/examples/find-orphans/main.go:411 msg="built interface map" interfaces=0
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/examples/find-orphans/main.go:499 msg="running symbolic execution from entry points"
time=2025-08-29T21:03:20.873Z level=INFO source=/app/examples/find-orphans/main.go:505 msg="** scan package" package=example.com/intra-pkg-methods/lib
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:108 msg="evaluating node" type=*ast.File pos=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:2:1 source="package lib\n\ntype MyType struct{}\n\n// In library mode, analysis starts from all exported functions.\n// ExportedMethod is an analysis start point, but it is never called by another\n// function, so it should be reported as an orphan.\nfunc (t *MyType) ExportedMethod() {\n\tt.unexportedMethod()\n}\n\n// unexportedMethod is called by ExportedMethod. Since the analysis traces\n// from ExportedMethod, unexportedMethod will be marked as \"used\" and is NOT an orphan.\nfunc (t *MyType) unexportedMethod()\t{}\n\n// trulyUnusedFunc is not called by anyone and should be an orphan.\nfunc trulyUnusedFunc()\t{}\n"
time=2025-08-29T21:03:20.873Z level=INFO source=/app/examples/find-orphans/main.go:561 msg="running in forced library mode" analysis_functions=1
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/examples/find-orphans/main.go:591 msg="analyzing from function" function=example.com/intra-pkg-methods/lib.ExportedMethod
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:2106 msg=applyFunction type=FUNCTION value="func ExportedMethod() { ... }"
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:108 msg="evaluating node" type=*ast.BlockStmt pos=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:9:35 source="{\n\tt.unexportedMethod()\n}"
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:108 msg="evaluating node" type=*ast.ExprStmt pos=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:10:5 source=t.unexportedMethod()
time=2025-08-29T21:03:20.873Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:108 msg="evaluating node" type=*ast.CallExpr pos=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:10:5 source=t.unexportedMethod()
time=2025-08-29T21:03:20.874Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:1973 msg=call stack.0.func=t.unexportedMethod stack.0.pos=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:10:5
time=2025-08-29T21:03:20.874Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:108 msg="evaluating node" type=*ast.SelectorExpr pos=/tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:10:5 source=t.unexportedMethod
time=2025-08-29T21:03:20.874Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:812 msg=evalSelectorExpr selector=unexportedMethod
time=2025-08-29T21:03:20.874Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:833 msg="evalSelectorExpr: evaluated left" type=SYMBOLIC_PLACEHOLDER value="<Symbolic: symbolic receiver for entry point method>"
time=2025-08-29T21:03:20.874Z level=DEBUG source=/app/goscan.go:975 msg="ScanPackageByImport CACHE HIT" importPath=example.com/intra-pkg-methods/lib types=1
time=2025-08-29T21:03:20.874Z level=DEBUG source=/app/symgo/evaluator/evaluator.go:1909 msg="findDirectMethodOnType: checking method" type=MyType method=unexportedMethod isMethodPtrRecv=true isVarPointer=false
time=2025-08-29T21:03:20.874Z level=INFO source=/app/examples/find-orphans/main.go:642 msg="symbolic execution complete"
    main_test.go:557: find-orphans mismatch (-want +got):
          []string{
		"(example.com/intra-pkg-methods/lib.*MyType).ExportedMethod",
        + 	"(example.com/intra-pkg-methods/lib.*MyType).unexportedMethod",
		"example.com/intra-pkg-methods/lib.trulyUnusedFunc",
          }

        Full output:

        -- Orphans --
        (example.com/intra-pkg-methods/lib.*MyType).ExportedMethod
          /tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:9:1
        (example.com/intra-pkg-methods/lib.*MyType).unexportedMethod
          /tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:15:1
        example.com/intra-pkg-methods/lib.trulyUnusedFunc
          /tmp/TestFindOrphans_intraPackageMethodCall2273716956/001/lib/lib.go:18:1
--- FAIL: TestFindOrphans_intraPackageMethodCall (0.01s)
FAIL
FAIL	github.com/podhmo/go-scan/examples/find-orphans	0.017s
FAIL
