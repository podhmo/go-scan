# TODO

> **Note on updating this file:**
> -   Do not move individual tasks to the "Implemented" section.
> -   A whole feature section (e.g., "convert Tool Implementation") should only be moved to "Implemented" when all of its sub-tasks are complete.
> -   For partially completed features, use checkboxes (`[x]` for complete, `[-]` for partially complete). A feature is considered partially complete if it has been implemented but has associated tests that are currently disabled.
> -   For partially completed features, use checkboxes (`[x]`) to mark completed sub-tasks.

This file tracks implemented features and immediate, concrete tasks.

For more ambitious, long-term features, see [docs/near-future.md](./docs/near-future.md).

## Implemented

- **Core Scanning Engine**: A robust, AST-based engine for parsing Go code. It supports lazy, on-demand, cross-package type resolution, and correctly handles complex scenarios like recursive types and generic type definitions. It can extract detailed information about all major Go constructs, including structs, functions, interfaces, and constants.
    - **Test Package Handling**: The scanner now correctly handles directories containing both a standard package (`pkg`) and its external test package (`pkg_test`) when the `include-tests` option is enabled, preventing "mismatched package names" errors.
    - **Robust Interface Implementation Analysis**: Replaced the basic `Implements` check with a powerful, `symgo`-derived engine that correctly handles pointer/value receivers, embedded interfaces, and cross-package types.
- **Dependency Analysis**: Includes the `deps-walk` command-line tool for visualizing dependency graphs (in DOT or Mermaid format) and a powerful underlying library for programmatic graph traversal, including forward and reverse dependency analysis.
- **Code Generation Framework**:
    - **`convert` Tool**: A feature-rich tool for generating type-safe conversion functions, driven by annotations (`@derivingconvert`), struct tags (`convert:"..."`), and global rules (`// convert:rule`). Supports nested types, custom functions, and comprehensive error collection.
    - **`derivingjson` & `derivingbind`**: Tools for generating JSON marshaling/unmarshaling and request binding logic.
    - **Unified Generator (`deriving-all`)**: An efficient, single-pass generator that combines the functionality of `derivingjson` and `derivingbind`.
- **Developer Experience & Testing**:
    - **`scantest` Library**: A testing harness for creating isolated, in-memory tests for tools built with `go-scan`.
    - **`scantest`: Path to Import Path Conversion**: Added a `scantest.ToImportPath` helper function (a wrapper around `locator.ResolvePkgPath`) to simplify converting file paths to Go import paths in tests.
    - **In-Memory File Overlay**: Allows providing file content in memory, essential for testing and tools that modify code before scanning.
    - **Debuggability**: Provides `--inspect` and `--dry-run` modes for easier debugging and testing of code generators.
    - **Test Refactoring**: Moved `symgo` integration tests from the `symgo/evaluator` directory to the `symgo` directory to better separate package-internal tests from integration tests.
- **Analysis & Documentation**:
    - **`symgo` Implementation Analysis**: Conducted a detailed investigation of the `symgo` evaluator's source code and test suite. Confirmed that the implementation of control flow and state management aligns with its documented design as a symbolic tracer, not a standard interpreter. Produced `docs/analysis-symgo-implementation.md` and `summary-symgo.md` to document the findings.
- **`minigo` Script Engine**: A nearly complete, embeddable script engine that interprets a large subset of Go.
    - **Core Interpreter**: The engine is fully implemented, supporting expressions, variables (`var`, `const`, `iota`), assignments, and all major control flow statements (`if`, `for`, `switch`, `break`, `continue`). It also supports `for...range` over integers (e.g., `for i := range 10`).
    - **Functions and Data Structures**: Supports user-defined functions, rich error reporting with stack traces, and composite types including structs, slices, and maps.
    - **Advanced Language Features**: Includes full support for pointers (`&`, `*`), method definitions on structs, interface definitions and dynamic dispatch, struct embedding, and basic generics. The interpreter's `for` loops now correctly create per-iteration variables, preventing common closure-related bugs, and aligning with modern Go semantics.
    - **Go Interoperability**: Provides a robust bridge to Go, allowing scripts to call Go functions, access Go variables, and unmarshal script results back into Go structs via `Result.As()`. Lazy, on-demand loading of imported Go packages is also supported.
- **Final API for `convert` Tool**: A new IDE-native method for configuring the `convert` tool using a `define` package. This allows for type-safe, statically valid Go code for defining conversion rules, improving the developer experience over the previous annotation-based system.
- **Parallel go-scan**: Implemented concurrent parsing and made the core scanner thread-safe.
- **Automated Minigo Bindings Generation**: Created a tool to automatically generate `minigo` bindings for Go packages, including initial support for several standard library packages. ([docs/plan-minigo-gen-bindings.md](./docs/plan-minigo-gen-bindings.md)) (now integrated as `minigo gen-bindings`)
- **MiniGo REPL**: Added a REPL for interactive script evaluation. ([docs/plan-minigo-repl.md](./docs/plan-minigo-repl.md))
- **Full `encoding/json` Support in `minigo`**: Implemented `json.Marshal` and `json.Unmarshal` with support for field tags and complex nested structs. ([docs/trouble-minigo-encoding-json.md](docs/trouble-minigo-encoding-json.md))
- **Extended Standard Library Support & Compatibility**:
    - Automated the generation of bindings for a wide range of standard library packages.
    - Implemented a test suite to validate generated bindings and conducted a thorough compatibility analysis, documenting key limitations and driving numerous interpreter enhancements. ([docs/trouble-minigo-stdlib-limitations.md](./docs/trouble-minigo-stdlib-limitations.md))
    - Resolved a critical FFI bug that prevented method calls on pointers to in-script FFI struct variables, unblocking stateful packages like `text/scanner`. ([docs/trouble-minigo-go-value-method-call.md](./docs/trouble-minigo-go-value-method-call.md))
    - Implemented support for interpreting the `slices` and `errors` packages from source by adding language features like 3-index slicing, variadic functions, and support for struct literals with scoped variables.
- **`docgen` and Symbolic-Execution-like Engine (`symgo`)**: A symbolic execution engine (`symgo`) and a demonstration tool (`docgen`) that uses it to generate OpenAPI 3.1 specifications from `net/http` server code. The engine can trace function calls, resolve types, and evaluate handler logic to infer routes, methods, parameters, and request/response schemas. The `docgen` tool includes a golden-file test suite and can output in both JSON and YAML. ([docs/plan-symbolic-execution-like.md](./docs/plan-symbolic-execution-like.md))
    - Removed manual stubs for standard library types (`net/http`, `io`, etc.) from the `docgen` example, as `go-scan`'s improved module-aware resolution now handles them automatically.
- **Type-Safe `docgen` Patterns**: Enhanced the `docgen` tool to allow defining analysis patterns using type-safe function and method references (`Fn: mypkg.MyFunc`, `Fn: (*mypkg.MyType)(nil).MyMethod`, `Fn: myInstance.MyMethod`) instead of string keys. This involved creating `GoSourceFunction` and `GoMethodValue` objects in the `minigo` interpreter, and handling `BoundMethod` objects, to preserve the necessary definition context and ensure correct symbol and method resolution from various expression forms. ([docs/plan-docgen-minigo-fn-ref.md](./docs/plan-docgen-minigo-fn-ref.md))
- **Scanner Refactoring**: Refactored the main `goscan.Scanner` to separate responsibilities. Lightweight dependency analysis methods (e.g., `Walk`, `FindImporters`) have been moved to a new `goscan.ModuleWalker` struct, while heavyweight parsing methods remain on `goscan.Scanner`. This clarifies the API and improves separation of concerns.
- **`symgo` Evaluator Enhancements**: The symbolic execution engine's evaluator has been significantly improved, resolving critical bugs that previously blocked call-graph analysis tools. This includes better handling of method entry points, reliable dispatch for both pointer and non-pointer receivers, correct type propagation, robust environment management for nested calls, and fixes for panics related to naked returns and incorrect path resolution for external packages.
    - **Method Call on Pointer Return Value**: Fixed a bug where the evaluator failed to resolve method calls on pointer types that were returned directly from a function (e.g., `getPointer().Method()`). The logic now correctly unwraps the `*object.ReturnValue` from the pointer's value before resolving the method, correctly modeling Go's automatic pointer dereferencing. ([docs/trouble-symgo2.md](./docs/trouble-symgo2.md))
    - **Unary Operator Support**: The evaluator now correctly handles unary operators (e.g., `-`) on expressions that are function calls (unwrapping `*object.ReturnValue`). Support has also been extended to numeric unary operators for float and complex types, in addition to integers.
    - **Robustness against `*object.ReturnValue`**: Fixed a bug where the evaluator would crash with an "invalid indirect" error when dereferencing a function call that returned a pointer. The evaluator now correctly unwraps the `*object.ReturnValue` before processing the dereference. ([docs/trouble-symgo.md](./docs/trouble-symgo.md))
    - **Correct Scope Resolution for Intra-Package Types**: Fixed a fundamental bug where the evaluator failed to load a package's type definitions into its environment, causing "identifier not found" errors for composite literals of types defined within the same package. This fix ensures that `symgo`-based tools like `goinspect` can correctly analyze their own codebases. 
    - **Centralized Package & Symbol Resolution**: Refactored the evaluator to use a central package cache (`pkgCache`). This ensures that for any given import path, a single, canonical package object is created and used, fixing a class of bugs related to inconsistent symbol resolution. This resolves failures with unexported constants in cross-package calls, improves handling of aliased imports, and correctly resolves package names that differ from their import paths (e.g., `gopkg.in/yaml.v2`). ([docs/trouble-symgo-identifier-not-found.md](./docs/trouble-symgo-identifier-not-found.md))
    - **Robust Recursion Detection**: Fixed a bug where the symbolic evaluator would enter an infinite loop when analyzing methods on cyclically defined types. The recursion detection logic now uses the source position of the method receiver, making it robust against different object instances of the same recursive type.
- **`symgo`: Cross-Module Source Scanning**: Added an option (`--include-pkg` in `docgen`) to allow the `symgo` engine to treat specified external packages as if they were internal, enabling deep, source-level analysis of their functions.
- **Find Orphan Functions and Methods**: A new tool `examples/find-orphans` that uses the improved `symgo` engine to perform whole-program analysis and identify unused functions and methods. It supports multi-module workspaces and `//go:scan:ignore` annotations. It intelligently detects whether to run in "application mode" (starting from `main.main`) or "library mode" (starting from all exported functions).
    - **[x]** **Specification and Logic Refinement**: The specification for the tool's behavior, particularly for library mode, has been significantly clarified and documented in `examples/find-orphans/spec.md`. The core logic has been updated to match. A bug related to intra-package method analysis has been fixed in `symgo`. The previously suspected upstream bug in `go-scan`'s file filtering was found to be a misunderstanding in the test setup itself; the test was using a filename (`not_a_test.go`) that was correctly being filtered as a test file because its name ends with the `_test.go` suffix. The test has been corrected.
    - **Correct Intra-Package Analysis**: Fixed a bug where unexported methods were incorrectly reported as orphans if they were only called by exported methods within the same package. The analysis now correctly treats exported methods as entry points in library mode.
    - **Result Filtering**: The tool now automatically excludes `main.main` and `init` functions from the list of orphans, as they are fundamental entry points.
    - **Scoped Analysis**: The tool's analysis can now be strictly scoped to a user-defined set of target packages. Orphans from upstream dependencies are no longer reported unless those dependencies are explicitly included in the input patterns. This is controlled by resolving file path patterns (`./...`) and import path patterns (`example.com/...`) into a canonical set of target packages. Directory traversal can be fine-tuned with the `--exclude-dirs` flag (e.g., to ignore `testdata`).
    - **[x]** **Enhanced Library Mode Analysis**: In library mode, the analysis now correctly includes all `init` functions and the `main.main` function (if present) as starting points for the call-graph traversal, ensuring that functions used only by these entry points are not incorrectly reported as orphans.
    - **[x]** **Global Variable Initializer Analysis**: Confirmed that functions called in global `var` initializers are correctly treated as "used" in all analysis modes. Added a regression test and updated `spec.md` to reflect this behavior.
    - **[x]** **Correct Scope Handling**: Fixed a bug where the reporting scope (from positional arguments) was incorrectly coupled with the analysis scope flag (`--primary-analysis-scope`). The tool now correctly distinguishes between the set of packages to scan and the set of packages to report orphans from.
    - **[x]** **Performance via Memoization**: Implemented a configurable memoization layer in the underlying `symgo` engine to cache function analysis results, significantly improving performance in library mode. ([docs/plan-find-orphans-memoize.md](./docs/plan-find-orphans-memoize.md))
- **`find-orphans`: Robust Path Handling**: The tool now correctly handles relative paths for the `--workspace-root` flag and resolves target path patterns (`./...`) relative to the specified workspace root, not the current working directory. This allows for more intuitive and predictable behavior when running the tool from subdirectories.
- **`symgo`: Embedded Method Resolution**: The symbolic execution engine can now correctly resolve and trace method calls on embedded structs, enabling more accurate call-graph analysis for tools like `find-orphans`.
- **`symgo`: Embedded Field Access**: The engine now also correctly resolves and traces field access on embedded structs.
- **`symgo`: Robust Handling of Out-of-Policy Embedded Types**: When accessing a method or field on a struct that embeds a type from an out-of-policy package, the engine now logs a warning and returns a symbolic placeholder, allowing analysis to continue gracefully instead of halting with an error.
    - **Resilient Accessor Logic**: The member search logic in the `accessor` has been improved. It now considers an embedded type "unresolved" if its import path is missing (due to incomplete scanner information) or if the path is explicitly out-of-policy. It exhausts all scannable in-policy embedded types before concluding that a member is unresolvable, preventing premature errors and ensuring warnings are only issued when a member is truly ambiguous.
- **`symgo`: Type Switch Support**: The symbolic execution engine now correctly handles `ast.TypeSwitchStmt` nodes, allowing it to analyze code that uses type switches (`switch v := i.(type)`). It correctly scopes the typed variable (`v`) within each case block.
- **`symgo`: Efficient & Configurable Scanning Policy**: The symbolic execution engine no longer scans packages outside the workspace by default, significantly improving performance and scalability. It now uses a `ScanPolicyFunc` to provide fine-grained, dynamic control over which packages are scanned from source versus being treated as symbolic placeholders. This replaces the older, less flexible `WithExtraPackages` mechanism.
- **`symgo`: Shallow Scanning**: The `symgo` evaluator is now more robust and performant when dealing with types from packages outside the defined scan policy. It can now create symbolic placeholders for unresolved types, allowing analysis to continue without crashing and enabling symbolic tracing of method calls on these types. This significantly improves the accuracy of tools like `find-orphans` when analyzing code with external dependencies. ([docs/plan-symgo-shallow-scan.md](./docs/plan-symgo-shallow-scan.md))
- **`symgo`: Field Access on Symbolic Receivers**: The `symgo` evaluator can now correctly access struct fields on symbolic receivers (e.g., a receiver of a method that is the entry point of analysis). This fixes a bug where field access was incorrectly failing with an "undefined method" error, particularly on structs that use `_ struct{}` to enforce keyed literals.
- **`go-scan`: Declarations-Only Scanning**: Added a `WithDeclarationsOnlyPackages` option to the `goscan.Scanner`. For packages specified with this option, the scanner parses all top-level declarations (types, functions, variables) but explicitly discards function bodies. This allows tools like `docgen` to obtain necessary type information from packages like `net/http` without incurring the cost and complexity of symbolically executing their entire implementation. This provides a significant performance and stability improvement for analyzing code that depends on large standard library packages.
- **`minigo` Interpreter Enhancements**: Comprehensive refinements to the `minigo` script engine including comprehensive API documentation and implementation of `defer` and `recover` statements. ([docs/plan-minigo.md](./docs/plan-minigo.md))
- **`minigo` FFI and Language Compatibility**: Resolved critical FFI and language limitations including type inference for empty slice literals, typed nil handling for slices and interfaces, improving overall stdlib compatibility and type checking accuracy.
- **`symgo` Interpreter Core Completion**: Completed the core symbolic execution engine to handle all major AST node types and language constructs. Key improvements include: proper import path resolution ([docs/trouble-symgo-identifier-not-found.md](./docs/trouble-symgo-identifier-not-found.md)), resilience to undefined identifiers, infinite recursion prevention, enhanced AST node support (generics, channels, function literals, etc.), and comprehensive refactoring of evaluator components (Resolver, accessor, Context handling).
- **`symgo` Architecture Refinements**: Major refactoring to improve analysis scope management and error handling. Introduced explicit analysis scopes with `WithPrimaryAnalysisScope` and `WithSymbolicDependencyScope`, enhanced type information for unresolved types, and improved resolver error handling for better robustness.
- **Advanced Analysis and Tool Enhancements**: Implemented comprehensive enhancements including structured logging with source stack traces, automatic workspace detection with `go.work` support, advanced interface method call analysis, multi-module workspace support with unified analysis, enhanced reporting capabilities (JSON output), and wildcard pattern support for improved package discovery.
- **`symgo`: Bounded Recursion**: The symbolic execution engine now uses a bounded recursion strategy to prevent analysis from hanging on deeply recursive functions. The evaluator now halts analysis of a recursive call path after one level, making its behavior consistent with the existing "unroll-once" strategy for loops and improving overall robustness. ([docs/plan-symgo-shallow-recursive.md](./docs/plan-symgo-shallow-recursive.md))
- **`symgotest`: A Debugging-First Testing Library for `symgo` ([docs/plan-symgotest.md](./docs/plan-symgotest.md))**
- **`symgo`: Implement Robust Interface Resolution ([docs/plan-symgo-interface-resolution.md](./docs/plan-symgo-interface-resolution.md))**
- **`symgo` Engine Improvements ([docs/plan-symgo-refine2.md](./docs/plan-symgo-refine2.md))**
- **`symgo`: Enforce Strict Scan Policy ([docs/plan-symgo-focus.md](./docs/plan-symgo-focus.md))**
- **`symgo`: Fix Local Type Alias Resolution**: The evaluator now correctly handles type aliases defined inside a function body. This includes creating a `TypeInfo` for the alias on-the-fly and correctly resolving composite literals that use the alias, ensuring the underlying type's structure is used for evaluation while preserving the alias's name for type checking. ([docs/cont-symgo-local-alias.md](./docs/cont-symgo-local-alias.md))
- **`symgo` Evaluator Enhancements**:
    - **`panic(nil)` Handling**: Fixed a critical bug where the symbolic evaluator would crash when analyzing code containing a `panic(nil)` call. The evaluator now correctly handles this as a symbolic `PanicError` object, preventing the crash and allowing analysis to continue. ([docs/trouble-symgo2.md](./docs/trouble-symgo2.md))
    - **Robust Intrinsics (`len`, `new`)**: Improved the `len` and `new` built-in function handlers to be more resilient. They can now handle `*object.ReturnValue` (the result of a function call), `*object.UnresolvedFunction`, and other symbolic placeholders without crashing, instead returning a new symbolic placeholder. This prevents entire analysis runs from failing due to incomplete type information. ([docs/trouble-symgo.md](./docs/trouble-symgo.md))
    - **Method Call on Pointers to Named Types (Map, Slice, etc.)**: Fixed a bug where the evaluator failed to resolve method calls on pointers to named map types. The evaluator now correctly preserves type alias information for named types and correctly handles automatic pointer dereferencing for value-receiver methods, mirroring the Go compiler's behavior. This has been confirmed to work for both named maps and named slices, and a consolidated regression test has been added. ([docs/trouble-symgo.md](./docs/trouble-symgo.md))
- **Unify Scanner Logic and Add Package ID**: Refactored the core scanner to use a single, robust private method for all package scanning, eliminating divergent and fragile logic. This change introduced a new `PackageInfo.ID` field, which serves as a unique identifier for packages, correctly disambiguating multiple `main` packages within a workspace (e.g., `"path/to/cmd.main"`). This fixed a class of bugs in whole-program analysis tools. ([docs/plan-goscan-scanner-refactoring.md](./docs/plan-goscan-scanner-refactoring.md)
- **`examples/goinspect`: Call-Graph Explorer**: A tool to analyze Go source code and display the call graph for specified functions. It supports multiple output formats (`--short`, `--expand`) and uses stable, position-based UIDs to correctly handle duplicate functions and recursion in expanded view. The test suite is comprehensive, using golden files to validate output for various scenarios including cross-package calls. ([docs/plan-goinspect.md](./docs/plan-goinspect.md))
    - **Orphan-Style Output**: The tool now filters the call graph to only show true entry points (functions not called by any other scanned function) at the top level. This provides a cleaner, more focused view of a library's public API or an application's main execution flows.
    - **Recursion Detection**: The output now correctly identifies and labels direct, mutual, and indirect recursive calls with a `[recursive]` prefix. The underlying `symgo` engine can now trace call context through higher-order functions to detect these complex cycles. Also enabled memoization for the `symgo` engine in `goinspect`. A bug was fixed where recursive functions were incorrectly filtered from the top-level output. ([docs/trouble-goinspect-recursive.md](./docs/trouble-goinspect-recursive.md))
 
## To Be Implemented

### `goinspect`: Fix Bugs and Enhancements
- [x] **Fix `stdlib_errors` test failure**: The `TestGoInspect/stdlib_errors` test was failing intermittently due to a non-deterministic analysis order in `symgo`. The fix was to collect all functions from scanned packages, sort them deterministically, and then perform the analysis, ensuring a stable call-graph generation.
- [x] **Add `--with` flag for dependency analysis**: Implemented a `--with` flag to include packages in the analysis scope without making them entry points, allowing users to trace calls into libraries.

### `symgo`: Improve Analysis Capabilities
- [x] **Cross-Package Call Representation**: Ensure that calls to functions in non-primary-scope packages are represented as terminal nodes in the call graph (e.g., as `object.SymbolicPlaceholder`) rather than being omitted.
- [x] **Higher-Order & Anonymous Functions**: Improved symbolic execution to correctly trace calls into and out of anonymous functions passed as arguments. The engine now "tags" function values with the call-site's context, allowing for more robust analysis of higher-order function calls.
- [x] **Method Values as Arguments**: Fixed a bug where the receiver context was lost when a method value (e.g., `s.myMethod`) was passed as an argument to a higher-order function, causing "identifier not found" errors.
- [x] **Indirect Recursion via Higher-Order Functions**: The `symgo` engine can now detect and halt analysis of indirect recursion through higher-order functions (e.g., `A -> HOF -> B`, `B -> HOF -> A`), preventing stack overflows. This was achieved by propagating call-stack context with function arguments. ([docs/trouble-goinspect-recursive.md](./docs/trouble-goinspect-recursive.md))
- [x] **Recursive Functions**: Analysis has been improved to correctly detect and represent direct, mutual, and indirect recursive function calls in the call graph.
- [x] **Anonymous Recursive Functions**: The evaluator can now detect and halt analysis of direct and mutual recursion in anonymous functions (function literals) by tracking their source position, preventing infinite loops.
- [x] **Interface Union Types**: Correctly parse and analyze interfaces defined as a union of types (e.g., `type MyInterface interface { *TypeA | *TypeB }`), enabling accurate analysis of generic functions that use them as constraints.
- [x] **Fix `invalid indirect` on Unresolved Function Types**: Fixed a crash in the evaluator when dereferencing a pointer to an unresolved function type (e.g., a function type from an unscanned package). The evaluator now returns a symbolic placeholder, improving robustness for tools like `find-orphans`. ([docs/trouble-symgo.md](docs/trouble-symgo.md))
- [x] **Import Path Heuristic**: Enhanced the heuristic for guessing package names from import paths. It now generates multiple candidates (e.g., for `"github.com/mattn/go-isatty"`, it produces `["isatty", "goisatty"]`) and checks each one, making symbol resolution for unscanned packages more robust and flexible. It now also handles suffixes like `-go` (e.g., `"github.com/stripe/stripe-go/v79"` -> `stripe`).

### `symgo`: Enhance Type-Narrowed Member Access ([docs/plan-symgo-type-switch.md](./docs/plan-symgo-type-switch.md))
- [x] Implement support for method calls and field access on variables narrowed by type switches and `if-ok` assertions.
  - [x] **`if-ok` Assertions**: The evaluator now correctly handles member access on variables narrowed using the `v, ok := i.(T)` idiom. This was achieved by introducing a `Clone() Object` method to the `object.Object` interface, which preserves the concrete value of the variable across the assertion.
  - [x] **`type-switch` Statements**: The evaluator now correctly handles member access on variables narrowed using the `switch v := i.(type)` statement by cloning the underlying object for each case.

### `symgotest`: A Debugging-First Testing Library for `symgo` ([docs/plan-symgotest.md](./docs/plan-symgotest.md))
- [ ] **Known Limitations**:
  - The `symgotest.Run` function does not support fine-grained control over package scan order, making it unsuitable for certain advanced test cases that validate order-insensitivity.

### `symgo`: Robustness in Test Code Analysis
- [ ] **Identifier Resolution in Tests**: Improve the resolution of identifiers for test-only variables and constants (e.g., `sampleAPIPath` in `docgen_test.go`) during whole-program analysis to prevent "identifier not found" errors.
- [x] **Handle `not a function: NIL`**: Fixed "not a function: NIL" errors that occurred during symbolic execution of test files. The root cause was that the tracer would explore an unreachable code path (e.g., inside an `if f != nil` block when `f` is nil) and then raise a fatal error when trying to evaluate the `nil` function call. The fix was to make the function call evaluator (`evalCallExpr`) gracefully handle being passed a `nil` object by returning early, allowing analysis to continue without crashing. ([docs/trouble-symgo.md](./docs/trouble-symgo.md))

### `symgo`: Improve Robustness by Addressing Standard Library Errors ([docs/plan-symgo-improve-robustness.md](./docs/plan-symgo-improve-robustness.md))
- [ ] **High Priority**:
  - [x] Implement `goto` statement support (handled as no-op).
  - [ ] Resolve generic type parameters correctly.
  - [ ] Prevent `invalid indirect` errors from nil pointer dereferencing.
- [ ] **Medium Priority**:
  - [ ] Support `uint64` and large integer constants to prevent overflow.
  - [ ] Improve type inference to fix selector type errors.
  - [ ] Implement missing operators for `complex` types.
- [ ] **Low Priority**:
  - [ ] Support parsing of large hex literals (related to `uint64` support).
